<% if [:past, :today, :upcoming].include?(card[:state]) && card[:sticker] %>
  <%# Hoverable card %>
  <div class="stickerlode-container relative overflow-hidden advent-card-flippable">
    <div class="w-full aspect-square relative">

      <%# Front content %>
      <div class="advent-card-front w-full h-full flex items-center justify-center relative">
        <% case card[:state] %>
        <% when :past, :today %>
          <%# Past day or Today: show full sticker if available %>
          <% if card[:sticker].image.attached? %>
            <%= image_tag(card[:sticker].image, class: "w-10/12 h-10/12 object-contain") %>
          <% end %>
        <% when :upcoming %>
          <%# upcoming: show silhouette if available, otherwise full image %>
          <% if card[:sticker].silhouette_image.attached? %>
            <%= image_tag(card[:sticker].silhouette_image, class: "w-10/12 h-10/12 object-contain") %>
          <% elsif card[:sticker].image.attached? %>
            <%= image_tag(card[:sticker].image, class: "w-10/12 h-10/12 object-contain grayscale contrast-200 brightness-0 opacity-60") %>
          <% end %>
        <% end %>

        <%# Label pill (yesterday or today) %>
        <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2">
          <% if card[:state] == :today %>
            <div class="bg-[#2C2318] border-2 border-[#F4E4C1] rounded-full px-3 py-1 2xl:px-4 2xl:py-2">
              <div class="text-xs md:text-sm font-mono text-[#F4E4C1] uppercase tracking-wider font-bold"><%= card[:label] %> – <%= card[:time_left_text] %></div>
            </div>

          <% else %>
            <div class="bg-[#F4E4C1] border-2 border-[#8B7355] rounded-full px-3 py-1 2xl:px-4 2xl:py-2">
              <div class="text-xs md:text-sm font-mono text-[#8B7355] uppercase tracking-wider font-bold"><%= card[:label] %></div>
            </div>
          <% end %>
        </div>
      </div>

      <%# Back content after Hover view %>
      <div class="advent-card-back">
        <h3 class="text-lg md:text-xl font-bold mb-3 font-mono text-[#2C2318] text-center leading-tight"><%= card[:sticker].name %></h3>
        <% if card[:sticker].description.present? %>
          <p class="text-sm md:text-base text-[#2C2318] opacity-80 text-center leading-relaxed"><%= card[:sticker].description %></p>
        <% end %>
      </div>

    </div>
  </div>
<% else %>
  <%# Non-hoverable card %>
  <div class="stickerlode-container relative overflow-hidden">
    <div class="w-full aspect-square flex items-center justify-center relative">
      <% if card[:sticker] %>
        <% case card[:state] %>
        <% when :upcoming %>
          <span class="text-2xl md:text-3xl font-bold text-[#6B5B47]">who's dat</span>
        <% end %>
      <% else %>
        <span class="text-2xl md:text-3xl font-bold text-[#6B5B47]">who's dat</span>
      <% end %>

      <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2">
        <% if card[:state] == :today %>
          <div class="bg-[#2C2318] border-2 border-[#F4E4C1] rounded-full px-3 py-1 2xl:px-4 2xl:py-2">
            <div class="text-xs md:text-sm font-mono text-[#F4E4C1] uppercase tracking-wider font-bold"><%= card[:label] %></div>
          </div>
        <% else %>
          <div class="bg-[#F4E4C1] border-2 border-[#<%= card[:state] == :past ? '8B7355' : '6B5B47' %>] rounded-full px-3 py-1 2xl:px-4 2xl:py-2">
            <div class="text-xs md:text-sm font-mono text-[#<%= card[:state] == :past ? '8B7355' : '6B5B47' %>] uppercase tracking-wider font-bold"><%= card[:label] %></div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
