<%= render "shared/button",
    text: "Report",
    icon: "flag.svg",
    data: {
      controller: "modal",
      action: "click->modal#open",
      modal_id: project.id,
      modal_type: "report"
    } %>

<%= render "shared/modal",
    id: "report-modal-#{project.id}",
    title: "Report #{project.title}?" do %>
  <%= form_with model: FraudReport.new, url: fraud_reports_path, method: :post, local: true do |form| %>
    <% if defined?(ship_event) && ship_event.present? %>
      <%= form.hidden_field :subject_type, value: "ShipEvent" %>
      <%= form.hidden_field :subject_id, value: ship_event.id %>
    <% else %>
      <%= form.hidden_field :subject_type, value: "Project" %>
      <%= form.hidden_field :subject_id, value: project.id %>
    <% end %>

    <div class="mb-4">
      <p class="text-md mb-3">We want good, high quality projects on Summer of Making. If you believe this project does not follow that mission, please let us know why:</p>

      <div class="space-y-2 mb-4">
        <label class="flex items-center space-x-3 cursor-pointer">
          <input type="radio" name="report_kind" value="low_quality" class="radio radio-sm" checked>
          <span class="text-sm">Low-quality ship</span>
        </label>
        <label class="flex items-center space-x-3 cursor-pointer">
          <input type="radio" name="report_kind" value="ai_undeclared" class="radio radio-sm">
          <span class="text-sm">Uses AI but it's undeclared</span>
        </label>
        <label class="flex items-center space-x-3 cursor-pointer">
          <input type="radio" name="report_kind" value="other" class="radio radio-sm">
          <span class="text-sm">Other</span>
        </label>
      </div>

      <div class="mb-2">
        <%= form.text_area :reason,
            placeholder: "Share a short explanation (20+ characters).",
            class: "som-horizontal-input w-full rounded-lg resize-none focus:ring-2 focus:ring-nice-blue focus:border-nice-blue transition-colors",
            rows: 4 %>
        <p class="text-xs text-gray-500 mt-1">Why are you reporting this project? (20+ characters)</p>
      </div>
    </div>

    <div class="flex justify-end space-x-3 mt-6">
      <%= render "shared/button",
          text: "Cancel",
          data: { action: "click->modal#close" } %>
      <%= render "shared/button",
          text: "Submit",
          type: :submit %>
    </div>
  <% end %>
<% end %>
