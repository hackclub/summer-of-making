<% allowed_fraud_team_buttons = [
  { label: "All Orders", path: admin_shop_orders_path },
  { label: "Pending Acceptance", path: pending_admin_shop_orders_path, count: ShopOrder.without_item_type("ShopItem::FreeStickers").where(aasm_state: :pending).count },
  { label: "Manual Fulfillment", path: awaiting_fulfillment_admin_shop_orders_path, count: ShopOrder.manually_fulfilled.without_item_type("ShopItem::FreeStickers").where(aasm_state: :awaiting_periodical_fulfillment).count },
  { label: "Users", path: admin_users_path },
  { label: "Reports Dashboard", path: "/admin/fraud_reports" },
  { label: "Blazer", path: admin_blazer_path }
] %>
<h1 style="font-size: 2rem;">admin dashboard!</h1>
<p style="color: var(--color-muted);">you look great today :-)</p>
<div class="agrid" style="max-width: 700px; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 1.2em;">
  <% if current_user.admin_or_fraud_team_member? %>
    <% if current_user.fraud_team_member? && !current_user.is_admin? %>
      <% allowed_fraud_team_buttons.each do |btn| %>
        <% if btn[:count] %>
          <%= link_to btn[:path], class: 'abtn secondary' do %>
            <%= btn[:label] %> <span class="pill"><%= btn[:count] %></span>
          <% end %>
        <% else %>
          <%= link_to btn[:label], btn[:path], class: 'abtn secondary' %>
        <% end %>
      <% end %>
    <% else %>
      <%= link_to "All Orders", admin_shop_orders_path, class: 'abtn secondary' %>
      <%= link_to pending_admin_shop_orders_path, class: 'abtn secondary' do %>
        Pending Acceptance <span class="pill"><%= ShopOrder.without_item_type("ShopItem::FreeStickers").where(aasm_state: :pending).count %></span>
      <% end %>
      <%= link_to awaiting_fulfillment_admin_shop_orders_path, class: 'abtn secondary' do %>
        Manual Fulfillment <span class="pill"><%= ShopOrder.manually_fulfilled.without_item_type("ShopItem::FreeStickers").where(aasm_state: :awaiting_periodical_fulfillment).count %></span>
      <% end %>
      <%= link_to "Shop Items", admin_shop_items_path, class: 'abtn secondary' %>
      <%= link_to admin_users_path, class: 'abtn secondary' do %>
        Users
      <% end %>
      <%= link_to admin_special_access_users_path, class: 'abtn secondary' do %>
        Special Access Users
      <% end %>
      <%= link_to "view counters", "/admin/view_analytics", class: 'abtn secondary' %>
      <%= link_to "Blazer", admin_blazer_path, class: 'abtn secondary' %>
      <%= link_to "Flipper", "/admin/flipper", class: 'abtn secondary' %>
      <%= link_to "Job Queue", admin_mission_control_jobs_path, class: 'abtn secondary' %>
      <%= link_to "Ahoy Captain Analytics", admin_ahoy_captain_path, class: 'abtn secondary' %>
      <%= link_to admin_ship_certifications_path, class: 'abtn secondary' do %>
        Ship certs <span class="pill"><%= ShipCertification.pending.size %></span>
      <% end %>
      <%= link_to admin_readme_certifications_path, class: 'abtn secondary' do %>
        README certs <span class="pill"><%= ReadmeCertification.pending.size %></span>
      <% end %>
      <%= link_to "voting dashboard", "/admin/voting_dashboard", class: 'abtn secondary' %>
      <%= link_to "payouts dashboard", "/admin/payouts_dashboard", class: 'abtn secondary' %>
      <%= link_to "reports dashboard", "/admin/fraud_reports", class: 'abtn secondary' %>
      <%= link_to "global caches", admin_caches_path, class: 'abtn secondary' %>
      <%= link_to admin_ysws_reviews_path, class: 'abtn secondary' do %>
          YSWS reviews <span class="pill"><%= Project.ysws_review_eligible.count %></span>
        <% end %>
      <%= link_to "the sinkening", admin_sinkening_path(SinkeningSetting.current), class: 'abtn secondary' %>
    <% end %>
  <% end %>
</div>
<div style="margin-top: 0.5em;">
  <%= link_to "← escape hatch", root_path, class: 'aout' %>
</div>
