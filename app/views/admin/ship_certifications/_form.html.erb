<%= form_with model: [:admin, ship_certification], local: true do |f| %>
  <% project = ship_certification.project %>
  <% if ship_certification.errors.any? %>
    <div id="error_explanation">
      <h2 style="color: var(--color-red);"><%= pluralize(ship_certification.errors.count, "error") %> prohibited this ship certification from being saved:</h2>
      <ul>
        <% ship_certification.errors.full_messages.each do |message| %>
          <li style="color: var(--color-red);"><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field" style="margin-bottom: 1.2em;">
    <b style="color: var(--color-muted);">Project:</b> <%= link_to project.title, project, style: 'color: var(--color-primary); font-weight: 600; text-decoration: underline;' %> |
    <%= link_to "View on Platform", project_path(project), target: "_blank", style: 'color: var(--color-primary); font-weight: 600; text-decoration: underline;' %><br>
    <b style="color: var(--color-muted);">User:</b> <%= project.user.display_name %> |
    <%= link_to "Admin Profile", admin_user_path(project.user), target: "_blank", style: 'color: var(--color-primary); font-weight: 600; text-decoration: underline;' %><br>
    <b style="color: var(--color-muted);">Ship Events:</b> <span style="color: var(--color-primary); font-weight: 600;"> <%= project.ship_events.size %></span><br>
    <b style="color: var(--color-muted);">Certification Type:</b> <span style="color: var(--color-primary); font-weight: 600;"> <%= project.certification_type&.humanize %></span><br>
    <b style="color: var(--color-muted);">Created:</b> <span style="color: var(--color-primary); font-weight: 600;"> <%= project.created_at.strftime("%m/%d/%Y at %I:%M %p") %></span><br>
    <b style="color: var(--color-muted);">Last Updated:</b> <span style="color: var(--color-primary); font-weight: 600;"> <%= project.updated_at.strftime("%m/%d/%Y at %I:%M %p") %></span><br>
  </div>

  <div class="field">
    <%= f.label :judgement, nil, style: 'color: var(--color-muted); font-weight: 600;' %>
    <%= f.select :judgement, options_for_select([
      ['Pending', 'pending'],
      ['Approved', 'approved'],
      ['Rejected', 'rejected']
    ], ship_certification.judgement), {}, { class: 'form-control', style: 'color: var(--color-primary); font-weight: 600; background: var(--color-darker); border-radius: 7px; border: 1px solid var(--color-border); padding: 0.7em 1em; margin-bottom: 0.2em;' } %>
  </div>

  <div class="field">
    <%= f.label :notes, nil, style: 'color: var(--color-muted); font-weight: 600;' %>
    <%= f.text_area :notes, rows: 4, style: 'padding:0.7em 1em; border-radius:7px; border:1px solid var(--color-border); background:var(--color-darker); color:var(--color-text); font-size:1em; margin-bottom:0.2em; min-height:100px; resize:vertical;' %>
  </div>

  <div class="field">
    <%= f.label :proof_video, "Proof Video", style: 'color: var(--color-muted); font-weight: 600;' %>
    <%= f.file_field :proof_video, style: 'padding:0.5em 0.2em; background:var(--color-sheet); border-radius:7px; border:1px solid var(--color-border); color:var(--color-text); font-size:1em; margin-bottom:0.2em;' %>
    <% if ship_certification.proof_video.attached? %>
      <p>Current: <%= link_to ship_certification.proof_video.filename, ship_certification.proof_video, target: "_blank", style: 'color: var(--color-primary); font-weight: 600; text-decoration: underline;' %></p>
    <% end %>
  </div>

  <div class="field">
    <b style="color: var(--color-muted);">Reviewing as:</b> <span style="color: var(--color-primary); font-weight: 600;"><%= current_user.display_name %></span>
    <%= f.hidden_field :reviewer_id, value: current_user.id %>
  </div>

  <div class="actions">
    <%= f.submit "Update Ship Certification", class: 'abtn small' %>
  </div>
  <i style="color: var(--color-muted); margin-top: 0.5em;">Remember, you are only testing to see "does this work?" You are not checking for hour inflation or other things.</i>
<% end %>
